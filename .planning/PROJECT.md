# Librar — Telegram-бот для поиска по личной библиотеке

## What This Is

Telegram-бот с инлайн-поиском, который ищет по личной библиотеке (~330 книг в форматах PDF, EPUB, FB2, TXT) и выдаёт релевантные отрывки в формате «Название книги — страница — цитата». Поддерживает смысловой (AI) и точный текстовый поиск. Библиотека пополняется через папку на диске или через отправку файлов боту.

## Core Value

По любому запросу — мгновенно находить и выдавать нужные отрывки из всех книг в библиотеке.

## Requirements

### Validated

(None yet — ship to validate)

### Active

- [ ] Парсинг книг в форматах PDF, EPUB, FB2, TXT с извлечением текста и метаданных (название, автор)
- [ ] Индексация текста для точного поиска по словам и фразам
- [ ] Семантическая индексация (embeddings) для смыслового поиска
- [ ] Telegram-бот с инлайн-поиском
- [ ] Результаты в формате: «Название книги» — страница/позиция — отрывок
- [ ] Настраиваемый размер отрывка в результатах
- [ ] Добавление книг через папку books/ (автоподхват)
- [ ] Добавление книг через отправку файла боту в Telegram

### Out of Scope

- Веб-интерфейс — Telegram достаточно для v1
- Редактирование текста в боте — пользователь редактирует вручную после получения
- Мультиязычный интерфейс — бот на русском
- Облачное хранилище книг — всё локально

## Context

- Книги преимущественно на русском языке (духовная/эзотерическая литература, художественная)
- 3 тестовые книги в папке books/ в формате FB2
- Для embeddings используется бесплатная модель через OpenRouter API (stepfun/step-3.5-flash:free)
- Бот работает локально на компьютере пользователя, с возможностью переноса на сервер

## Constraints

- **API**: OpenRouter API (бесплатная модель stepfun/step-3.5-flash:free) для семантического поиска
- **Форматы**: Поддержка PDF, EPUB, FB2, TXT
- **Хостинг**: Локальный запуск (Windows)
- **Интерфейс**: Telegram Bot API с инлайн-режимом

## Key Decisions

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| Python как язык | Лучшая экосистема для работы с текстом, AI, Telegram-ботами | — Pending |
| OpenRouter для embeddings | Бесплатный API, указан пользователем | — Pending |
| Telegram инлайн-бот | Удобный доступ с любого устройства | — Pending |

---
*Last updated: 2026-02-07 after initialization*
