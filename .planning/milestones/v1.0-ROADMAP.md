# Milestone v1.0: MVP

**Status:** ✅ SHIPPED 2026-02-09
**Phases:** 1-6
**Total Plans:** 24

## Overview

v1.0 delivered a complete local-first intelligent library system: multi-format ingestion, keyword and semantic indexing, hybrid search, Telegram bot access, and automated library growth through folder watching and bot uploads.

## Phases

### Phase 1: Setup & Document Processing

**Goal**: Books can be parsed into structured, searchable chunks with accurate metadata  
**Depends on**: Nothing (first phase)  
**Requirements**: PARSE-01, PARSE-02, PARSE-03, PARSE-04, PARSE-05, PARSE-06, PARSE-07  
**Plans**: 4 plans

Plans:

- [x] 01-01 — Bootstrap ingestion foundation with canonical schema and adapter contracts
- [x] 01-02 — Implement PDF and EPUB adapters with locator-preserving extraction
- [x] 01-03 — Implement FB2 and TXT adapters with encoding and Cyrillic-path robustness
- [x] 01-04 — Wire chunking + dedupe into unified ingestion CLI and end-to-end tests

### Phase 2: Text Search Foundation

**Goal**: Users can find exact keywords and phrases across all books instantly with Russian morphology support  
**Depends on**: Phase 1  
**Requirements**: INDEX-01, INDEX-02, INDEX-05, SRCH-01, SRCH-02, LIB-02  
**Plans**: 4 plans

Plans:

- [x] 02-01 — Establish morphology normalization foundation and compatibility guards
- [x] 02-02 — Upgrade ingestion chunking to sentence-aware overlap boundaries
- [x] 02-03 — Implement FTS5 schema with incremental startup indexing CLI
- [x] 02-04 — Deliver ranked exact+lemmatized text query CLI

### Phase 3: Semantic Search Capability

**Goal**: Users can discover content by meaning, not just exact word matches  
**Depends on**: Phase 1  
**Requirements**: INDEX-03, INDEX-04, SRCH-03  
**Plans**: 4 plans

Plans:

- [x] 03-01 — Establish OpenRouter embedding gateway and semantic config contract
- [x] 03-02 — Add FAISS persistence layer plus semantic metadata schema in SQLite
- [x] 03-03 — Implement incremental semantic indexing CLI over existing chunks
- [x] 03-04 — Deliver semantic query CLI with relevance/latency verification checkpoint

### Phase 4: Hybrid Search

**Goal**: Users get best results combining keyword precision with semantic understanding  
**Depends on**: Phase 2, Phase 3  
**Requirements**: SRCH-04, SRCH-05, SRCH-06  
**Plans**: 4 plans

Plans:

- [x] 04-01 — Build hybrid scoring normalization and fusion primitives
- [x] 04-02 — Align text and semantic query filters plus metadata parity
- [x] 04-03 — Implement hybrid query orchestrator and CLI contract
- [x] 04-04 — Add integration acceptance checks and real-corpus verification checkpoint

### Phase 5: Telegram Bot Interface

**Goal**: Users can search their library from any Telegram chat using inline mode  
**Depends on**: Phase 4  
**Requirements**: BOT-01, BOT-02, BOT-03, BOT-05, BOT-06  
**Plans**: 5 plans

Plans:

- [x] 05-01 — Establish async bot search gateway and config foundation
- [x] 05-02 — Add persistent user settings schema/repository and `/settings` flow
- [x] 05-03 — Implement command, inline, and pagination handlers
- [x] 05-04 — Assemble bot entrypoint and full automated bot test suite
- [x] 05-05 — Run real Telegram UAT checkpoint for acceptance

### Phase 6: Library Automation

**Goal**: Users can add books effortlessly via folder watch or Telegram file upload  
**Depends on**: Phase 5  
**Requirements**: BOT-04, LIB-01  
**Plans**: 3 plans

Plans:

- [x] 06-01 — Build async ingestion service and debounced folder watcher with CLI
- [x] 06-02 — Add Telegram document upload handler with validation and bot integration
- [x] 06-03 — Wire watcher into bot lifecycle and add integration tests

---

## Milestone Summary

**Key Decisions:**

- Canonical ingestion schema and adapter protocol stabilized cross-format extraction contracts.
- Deterministic Russian normalization unified indexing and query behavior.
- Hybrid retrieval contract standardized ranking/fusion output for bot and CLI consumers.
- Bot runtime architecture centralized dependencies in `bot_data` and enforced fail-fast config.
- Library automation reused one shared subprocess ingestion pipeline from both watcher and uploads.

**Issues Resolved:**

- Multi-format parsing and locator-safe chunk citation support.
- Incremental text and semantic indexing with persisted state.
- Telegram response-time safety with guarded subprocess timeout.
- End-to-end automation path for both folder and Telegram uploads.

**Issues Deferred:**

- Full 330-book startup performance validation remained documented as manual follow-up.
- Long-run watcher CPU profiling in real operating conditions remained a manual operational check.

**Technical Debt Incurred:**

- Non-blocking source-path normalization duplicate-result risk noted in hybrid verification.
- PTB `ConversationHandler` warning noise during tests should be cleaned up during hardening.

---

_For current project status after v1.0, see `.planning/ROADMAP.md`._
