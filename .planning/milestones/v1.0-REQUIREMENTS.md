# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-10  
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.0.  
For active requirements in the next milestone, create a fresh `.planning/REQUIREMENTS.md` via `/gsd-new-milestone`.

---

# Requirements: Librar (v1 snapshot)

**Defined:** 2026-02-07  
**Core Value:** По любому запросу — мгновенно находить и выдавать нужные отрывки из всех книг в библиотеке.

## v1 Requirements

### Парсинг книг (PARSE)

- [x] **PARSE-01**: Извлечение текста из PDF файлов с сохранением структуры
- [x] **PARSE-02**: Извлечение текста из EPUB файлов
- [x] **PARSE-03**: Извлечение текста из FB2 файлов
- [x] **PARSE-04**: Извлечение текста из TXT файлов
- [x] **PARSE-05**: Автоизвлечение метаданных (название, автор) из файлов всех форматов
- [x] **PARSE-06**: Отслеживание номеров страниц/глав/позиций для каждого чанка
- [x] **PARSE-07**: Обнаружение дубликатов книг (по содержимому/метаданным)

### Индексация (INDEX)

- [x] **INDEX-01**: Разбиение текста на чанки с перекрытием (context-aware chunking)
- [x] **INDEX-02**: Индексация чанков в SQLite FTS5 для текстового поиска
- [x] **INDEX-03**: Генерация embeddings через OpenRouter API
- [x] **INDEX-04**: Сохранение embeddings в FAISS для векторного поиска
- [x] **INDEX-05**: Инкрементальная индексация (только новые/изменённые книги)

### Поиск (SRCH)

- [x] **SRCH-01**: Точный текстовый поиск по словам и фразам (SQLite FTS5)
- [x] **SRCH-02**: Русская морфология в текстовом поиске (лемматизация через pymorphy2)
- [x] **SRCH-03**: Смысловой AI-поиск по embeddings (FAISS)
- [x] **SRCH-04**: Гибридный поиск — объединение текстового и смыслового с ранжированием
- [x] **SRCH-05**: Фильтры по автору, формату книги
- [x] **SRCH-06**: Результаты в формате: «Название книги» — страница/позиция — отрывок

### Telegram-бот (BOT)

- [x] **BOT-01**: Инлайн-поиск (@botname запрос из любого чата)
- [x] **BOT-02**: Команды /start, /help, /search
- [x] **BOT-03**: Пагинация результатов (кнопки «Далее» / «Назад»)
- [x] **BOT-04**: Загрузка книг через отправку файла боту
- [x] **BOT-05**: Команда /books — список книг в библиотеке
- [x] **BOT-06**: Настраиваемый размер отрывка в результатах (/settings)

### Управление библиотекой (LIB)

- [x] **LIB-01**: Автоподхват новых книг из папки books/ (watchdog)
- [x] **LIB-02**: Индексация при запуске (batch processing существующих книг)

## v2 Backlog (not part of v1 delivery)

### Улучшение поиска

- **SRCH-07**: История поиска (последние 10 запросов)
- **SRCH-08**: Подсветка найденных слов в отрывках
- **SRCH-09**: Подсказки при вводе (autocomplete)

### Расширенное управление

- **LIB-03**: Статистика библиотеки (количество книг, размер индекса)
- **LIB-04**: Удаление книг из библиотеки через бота
- **LIB-05**: Переиндексация отдельных книг

## Traceability (final v1 status)

| Requirement | Phase | Status |
|-------------|-------|--------|
| PARSE-01 | Phase 1 | Complete |
| PARSE-02 | Phase 1 | Complete |
| PARSE-03 | Phase 1 | Complete |
| PARSE-04 | Phase 1 | Complete |
| PARSE-05 | Phase 1 | Complete |
| PARSE-06 | Phase 1 | Complete |
| PARSE-07 | Phase 1 | Complete |
| INDEX-01 | Phase 2 | Complete |
| INDEX-02 | Phase 2 | Complete |
| INDEX-03 | Phase 3 | Complete |
| INDEX-04 | Phase 3 | Complete |
| INDEX-05 | Phase 2 | Complete |
| SRCH-01 | Phase 2 | Complete |
| SRCH-02 | Phase 2 | Complete |
| SRCH-03 | Phase 3 | Complete |
| SRCH-04 | Phase 4 | Complete |
| SRCH-05 | Phase 4 | Complete |
| SRCH-06 | Phase 4 | Complete |
| BOT-01 | Phase 5 | Complete |
| BOT-02 | Phase 5 | Complete |
| BOT-03 | Phase 5 | Complete |
| BOT-04 | Phase 6 | Complete |
| BOT-05 | Phase 5 | Complete |
| BOT-06 | Phase 5 | Complete |
| LIB-01 | Phase 6 | Complete |
| LIB-02 | Phase 2 | Complete |

---

## Milestone Summary

**Shipped:** 22 of 22 v1 requirements  
**Adjusted:** None required for v1 closure  
**Dropped:** None

---

*Archived: 2026-02-10 as part of v1.0 milestone completion*
